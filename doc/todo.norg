@document.meta
title: Dev notes.
description: 
authors: jarviskennedy
categories: 
created: 2023-08-30
updated: 2023-10-04T00:02:07-0500
version: 1.1.1
@end

* To Dos
  - (x) Separate capture logic into its on module.
  - ( ) Write test cases for all functions so that you know when you mess something up.
  - (x) Refactor the picker logic. 
  - (x) Capture templates
  - ( ) SQL moduleÂ 
  - ( ) Back links (super important)
  - ( ) Tags ?
  - ( ) Other types of linkables.


* Metadata 
  - inject / update metadata
  - capture templates metadata template
  - change templates to ipairs instead of pairs for guaranteed ordering.

* Links
  - Links should include workspace like `{:$personal/index:}[personal index]` so that linking to
	other workspaces works properly
  - How can we make renaming files not break links? I guess just from the renamed file run neorg-roam update
	links... but you shouldnt need to do this.
* SQLite
** To do 
   - make it its own neorg module.
   - find out how to create indexes for searching, look at zk for knowing what needs to be indexed.    
   - implement the sync functionality and test if it is faster to read from the db then to use
	 dirman. Its probably not, but definitely faster than reading all the files to get the metadata
   - generate uuid per file, and use it in the notes table, and insert in metadata.
   - anything else?
** Schemas
*** Notes table
	@table
	| id            | filepath (for opening files) | workspacepath (for inserting links) | title           |
	| ------------- | ----------------             | -----------------                   | --              |
	| int not null  | string not null              | string not null                     | string not null |
	@end

*** Back Links 
	@table
	| source_id      | target_id      | href                                    | lin                |
	| ---            | ---            | --------                                | ---                |
	| FK to notes.Id | FK to notes.Id | string  e.g. `{:$wrkspc/path/to/link:}` | `{:path/to/link:}` |
	@end

** thoughts
   - How should we update links if filename/location changes? I think just run a command from the
	 file which was changed to search for backlinks using uuid, then use treesitter to update the
	 link path in those files.
   - Need to db-sync to generate the db from files. Take a look at org-roam to see how they implement db-syncing.

* Capture templates
  - Improvements to capture templates.
  - Add metadata template to capture templates.
  - Insert after any tree sitter node. - Then make a capture template example which will let you
	choose which heading to insert after.
